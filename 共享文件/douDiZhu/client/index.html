<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>小昕斗地主</title>
    <link rel="stylesheet" href="css/card.css">

    <script src="js/start.js"></script>
    <script src="js/CardMapping.js"></script>
    <script src="js/CardUI.js"></script>
    <script src="js/CardData.js"></script>
    <script src="js/GameRule.js"></script>
    <script src="js/PlayUI.js"></script>
    <script src="js/Player.js"></script>

    <style>
        html
        {
            width: 100%;
            height: 100%;
            font-size: 62.5%;
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        body 
        {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            background: #000;
            color: #DDD;
            font-family: 'Helvetica', 'Lucida Grande', 'Arial', sans-serif;
            position: relative;
        }
        .dipai
        {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translate(-50%);
            width: 40rem;
            height: 15rem;
            background-color: lightgoldenrodyellow;
        }
        .leftPlayer
        {
            position: absolute;
            top: 20%;
            left: 0%;
            width: 15rem;
            height: 30rem;
            background-color: lightgoldenrodyellow;
        }
        .rightPlayer
        {
            position: absolute;
            top: 20%;
            right: 0%;
            width: 15rem;
            height: 30rem;
            background-color: lightgoldenrodyellow;
        }
        .player
        {
            position: absolute;
            bottom: 5%;
            left: 50%;
            transform: translate(-50%);
            width: 120rem;
            height: 15rem;
            background-color: lightgoldenrodyellow;
        }
        .mainArea
        {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -55%);
            width: 100rem;
            height: 40rem;
            background-color: lightgoldenrodyellow;
        }
        .scoreArea
        {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 20rem;
            height: 4rem;
            background-color: lightgoldenrodyellow;
        }
        .timer
        {
            position: absolute;
            top: 2%;
            left: 75%;
            width: 10rem;
            height: 10rem;
            background-color: lightgoldenrodyellow;
        }
        #startBtn
        {
            width: 10rem;
            height: 4rem;
            position: absolute;
            top: 65%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 0.5rem;
            background-color: blue;
            outline: none;
        }

        div[class='card']
        {
            width: 8rem;
            height: 13rem;
        }
        /*花色和数字符号*/
        div[class='card'] span
        {
            font-size: 2rem;
        }
        /*纸牌中心的花色符号*/
        div[class='card'] i
        {
            font-size: 8rem;
        }
    </style>
</head>

<body>

    <div class="dipai">
        <p style="color:black; font-size:2rem;">dipai</p>
    </div>
    <div class="leftPlayer">
        <p style="color:black; font-size:2rem;">leftPlayer</p>
    </div>
    <div class="rightPlayer">
        <p style="color:black; font-size:2rem;">rightPlayer</p>
    </div>
    <div class="player">
        <p style="color:black; font-size:2rem;">player</p>
    </div>
    <div class="mainArea">
        <p style="color:black; font-size:2rem;">mainArea</p>
    </div>
    <div class="scoreArea">
        <p style="color:black; font-size:2rem;">scoreArea</p>
    </div>
    <div class="timer">
        <p style="color:black; font-size:2rem;">timer</p>
    </div>
    <button id="startBtn">
        <p style="color:white; font-size:2rem; margin:0; padding:0">start</p>
    </button>

    <script>
        G.init();
        let body = document.getElementsByTagName('body')[0];
        let con = document.getElementsByClassName('player')[0];
        let newcard = CardData.getNewCard();

        let p1 = new Player('A'),
            p2 = new Player('B'),
            p3 = new Player('C');

        let playercard = randomArrayItem(newcard, 17, []);

        // let left = 7;
        // for(let i=0; i<playercard.length; i++)
        // {
        //     let num = playercard[i].val;
        //     let type = playercard[i].type;
        //     let card = new CardUI(num, type.toString(), con);

        //     con.appendChild(card.domInstance);
        //     // card.domInstance.style.bottom = '6%';
        //     card.domInstance.style.left = left + '%';
        //     left = left + 5;
        // }

        let play = new PlayUI();
        play.renderCards(G.ownPlayerContainer, playercard);

        

        function randomArrayItem(array, num, targetArray)
        {
            let len = array.length;
            if(targetArray.length < num)
            {
                let deleteIndex = Math.floor(Math.random()*len);
                let item = array[deleteIndex];
                let rstArray = Array.prototype.splice.call(array, deleteIndex, 1);
                targetArray.push(item);
                randomArrayItem(array, num, targetArray);
            }
            return targetArray;
        }

    </script>
</body>

</html>